<mxfile host="app.diagrams.net" agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36" version="29.3.0" pages="7">
  <diagram name="JobSchedular" id="_ToYyyfU5x0B0Ty8wEFU">
    <mxGraphModel grid="1" page="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="SLdDHBOQmKSGQQhf-nkD-2" parent="1" style="text;html=1;whiteSpace=wrap;overflow=hidden;rounded=0;" value="&lt;h1 style=&quot;margin-top: 0px;&quot;&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;Job Schedular&amp;nbsp;&lt;/span&gt;&lt;/h1&gt;&lt;h1 style=&quot;margin-top: 0px;&quot;&gt;&lt;span style=&quot;font-weight: 400;&quot;&gt;&lt;font style=&quot;font-size: 11px;&quot;&gt;Requirement&lt;/font&gt;&lt;/span&gt;&lt;/h1&gt;&lt;div&gt;&lt;span style=&quot;font-weight: 400;&quot;&gt;&lt;font size=&quot;3&quot;&gt;1.&amp;nbsp; We can submit jobs.&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;2. Jobs can be one time or recurring&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;3. Jobs should run at a specified time if one time and in case of recurring it should run multiple times&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;4. Jobs result can be downloaded.&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;5. We can check job status.&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;6. Cancel jobs&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;7. Priority of jobs&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;Non Functional&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;1. Availability: The system should be availble. You should be able to submit job&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;2. Scalability: Should handle million of execution of job.&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;3. Reliability:&amp;nbsp;&amp;nbsp;&lt;/font&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;&lt;font size=&quot;3&quot;&gt;Jobs should eventually execute.&lt;br&gt;4. Fault tolereance: System should recover form failure and no single ponit of failure&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;&lt;font size=&quot;3&quot;&gt;5. Latency : Job submission and exectuion should be minimal.&amp;nbsp;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="480" width="650" x="-30" y="170" as="geometry" />
        </mxCell>
        <mxCell id="SLdDHBOQmKSGQQhf-nkD-12" edge="1" parent="1" source="SLdDHBOQmKSGQQhf-nkD-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" target="SLdDHBOQmKSGQQhf-nkD-9">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SLdDHBOQmKSGQQhf-nkD-3" parent="1" style="rounded=0;whiteSpace=wrap;html=1;" value="Api gateway" vertex="1">
          <mxGeometry height="310" width="90" x="930" y="215" as="geometry" />
        </mxCell>
        <mxCell id="SLdDHBOQmKSGQQhf-nkD-4" parent="1" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;" value="Architecture Design&lt;div&gt;&lt;br&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="50" width="130" x="890" y="140" as="geometry" />
        </mxCell>
        <mxCell id="SLdDHBOQmKSGQQhf-nkD-8" edge="1" parent="1" source="SLdDHBOQmKSGQQhf-nkD-5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" target="SLdDHBOQmKSGQQhf-nkD-3">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SLdDHBOQmKSGQQhf-nkD-5" parent="1" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" value="client" vertex="1">
          <mxGeometry height="110" width="110" x="730" y="315" as="geometry" />
        </mxCell>
        <mxCell id="SLdDHBOQmKSGQQhf-nkD-13" parent="1" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;" value="Dynamodb&lt;div&gt;&lt;br&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="160" width="120" x="1370" y="290" as="geometry" />
        </mxCell>
        <mxCell id="SLdDHBOQmKSGQQhf-nkD-15" edge="1" parent="1" source="SLdDHBOQmKSGQQhf-nkD-9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" target="SLdDHBOQmKSGQQhf-nkD-13">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SLdDHBOQmKSGQQhf-nkD-16" parent="1" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;" value="&lt;b&gt;&lt;font style=&quot;font-size: 18px;&quot;&gt;Jobs Table&lt;/font&gt;&lt;/b&gt;&lt;div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;&amp;nbsp; JobId:&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;type:&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;first_run_at&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;next_run_at&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;status&lt;br&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;&lt;b&gt;Jobs_Execution :&amp;nbsp;&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;Execution_id&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;job_id&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;scheduled_time&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;started_at&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;completed_at&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;attempts&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;error_message&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;status&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="215" width="210" x="1520" y="252.5" as="geometry" />
        </mxCell>
        <mxCell id="SLdDHBOQmKSGQQhf-nkD-17" parent="1" style="rounded=0;whiteSpace=wrap;html=1;" value="" vertex="1">
          <mxGeometry height="60" width="120" x="1110" y="330" as="geometry" />
        </mxCell>
        <mxCell id="RzguM6jV958n7zB4qduK-2" edge="1" parent="1" source="SLdDHBOQmKSGQQhf-nkD-9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.25;exitY=1;exitDx=0;exitDy=0;" target="SLdDHBOQmKSGQQhf-nkD-34">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1130" y="410" />
              <mxPoint x="1140" y="410" />
              <mxPoint x="1140" y="640" />
              <mxPoint x="770" y="640" />
              <mxPoint x="770" y="1080" />
            </Array>
            <mxPoint x="1100" y="410" as="sourcePoint" />
            <mxPoint x="840" y="1080" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="SLdDHBOQmKSGQQhf-nkD-9" parent="1" style="rounded=0;whiteSpace=wrap;html=1;" value="Job Submission Service" vertex="1">
          <mxGeometry height="60" width="120" x="1100" y="340" as="geometry" />
        </mxCell>
        <mxCell id="SLdDHBOQmKSGQQhf-nkD-19" edge="1" parent="1" source="SLdDHBOQmKSGQQhf-nkD-18" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1440" y="460" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="SLdDHBOQmKSGQQhf-nkD-18" parent="1" style="rounded=0;whiteSpace=wrap;html=1;" value="" vertex="1">
          <mxGeometry height="70" width="160" x="1360" y="560" as="geometry" />
        </mxCell>
        <mxCell id="SLdDHBOQmKSGQQhf-nkD-22" edge="1" parent="1" source="SLdDHBOQmKSGQQhf-nkD-20" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" target="SLdDHBOQmKSGQQhf-nkD-21">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SLdDHBOQmKSGQQhf-nkD-39" edge="1" parent="1" source="SLdDHBOQmKSGQQhf-nkD-20" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" target="SLdDHBOQmKSGQQhf-nkD-38">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SLdDHBOQmKSGQQhf-nkD-20" parent="1" style="rounded=0;whiteSpace=wrap;html=1;" value="Job Scedular" vertex="1">
          <mxGeometry height="70" width="180" x="1330" y="580" as="geometry" />
        </mxCell>
        <mxCell id="SLdDHBOQmKSGQQhf-nkD-21" parent="1" style="rounded=1;whiteSpace=wrap;html=1;" value="Kafka" vertex="1">
          <mxGeometry height="60" width="320" x="1260" y="760" as="geometry" />
        </mxCell>
        <mxCell id="SLdDHBOQmKSGQQhf-nkD-23" parent="1" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;" value="Execution_id" vertex="1">
          <mxGeometry height="30" width="60" x="1430" y="700" as="geometry" />
        </mxCell>
        <mxCell id="SLdDHBOQmKSGQQhf-nkD-25" edge="1" parent="1" source="SLdDHBOQmKSGQQhf-nkD-24" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" target="SLdDHBOQmKSGQQhf-nkD-21">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1220" y="790" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="SLdDHBOQmKSGQQhf-nkD-26" parent="1" style="rounded=0;whiteSpace=wrap;html=1;" value="" vertex="1">
          <mxGeometry height="90" width="170" x="890" y="730" as="geometry" />
        </mxCell>
        <mxCell id="SLdDHBOQmKSGQQhf-nkD-24" parent="1" style="rounded=0;whiteSpace=wrap;html=1;" value="Job Executors" vertex="1">
          <mxGeometry height="80" width="170" x="870" y="750" as="geometry" />
        </mxCell>
        <mxCell id="SLdDHBOQmKSGQQhf-nkD-28" edge="1" parent="1" source="SLdDHBOQmKSGQQhf-nkD-26" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0;exitDx=0;exitDy=0;entryX=0;entryY=0;entryDx=0;entryDy=112.5;entryPerimeter=0;" target="SLdDHBOQmKSGQQhf-nkD-13" value="">
          <mxGeometry height="50" relative="1" width="50" as="geometry">
            <mxPoint x="1330" y="660" as="sourcePoint" />
            <mxPoint x="1380" y="610" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="SLdDHBOQmKSGQQhf-nkD-34" parent="1" style="ellipse;whiteSpace=wrap;html=1;" value="S3&lt;div&gt;&lt;br&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="130" width="150" x="890" y="1000" as="geometry" />
        </mxCell>
        <mxCell id="SLdDHBOQmKSGQQhf-nkD-35" edge="1" parent="1" source="SLdDHBOQmKSGQQhf-nkD-24" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.417;entryY=0.1;entryDx=0;entryDy=0;entryPerimeter=0;" target="SLdDHBOQmKSGQQhf-nkD-34">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SLdDHBOQmKSGQQhf-nkD-36" parent="1" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;store the Results&lt;/font&gt;" vertex="1">
          <mxGeometry height="50" width="150" x="970" y="910" as="geometry" />
        </mxCell>
        <mxCell id="SLdDHBOQmKSGQQhf-nkD-37" parent="1" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;" value="Scan the dynamodb to fetch the next jobs where are to be run" vertex="1">
          <mxGeometry height="65" width="150" x="1480" y="495" as="geometry" />
        </mxCell>
        <mxCell id="SLdDHBOQmKSGQQhf-nkD-38" parent="1" style="ellipse;whiteSpace=wrap;html=1;" value="Redis" vertex="1">
          <mxGeometry height="110" width="130" x="1640" y="560" as="geometry" />
        </mxCell>
        <mxCell id="SLdDHBOQmKSGQQhf-nkD-41" parent="1" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;" value="Text" vertex="1">
          <mxGeometry height="30" width="60" x="1220" y="670" as="geometry" />
        </mxCell>
        <mxCell id="SLdDHBOQmKSGQQhf-nkD-42" parent="1" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;" value="&lt;font style=&quot;font-size: 18px;&quot;&gt;Failure Scenarios&lt;br&gt;1. If&amp;nbsp; we create a job but the schedular already scheduled for next time this new job wont be picked&lt;/font&gt;&lt;div&gt;&lt;font style=&quot;font-size: 18px;&quot;&gt;2. If there is some error in the proceesing of job we push it to retry queue&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 18px;&quot;&gt;3. If we the workers executing the job fails then either the schedular schedules them again. from kafka we update the offset immediately after consuming. executor marks state as running. if executor errors out we retry. if execuotor fails in between then we schedular checks in db for entries which are still running but has crossed a threshold.&lt;br&gt;4. What if the schedular goes down - 1. we can use multiple scheular and sync using zookeeper&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 18px;&quot;&gt;5. We also have to store the last scan time of that partition.&lt;/font&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="220" width="1170" x="1160" y="870" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="IObH5jq8YfRM92jNZSkj" name="Notification">
    <mxGraphModel dx="2545" dy="1723" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="z1vnc6DWJGNIZR1WN-FW-1" parent="1" style="rounded=0;whiteSpace=wrap;html=1;" value="" vertex="1">
          <mxGeometry height="60" width="120" x="1395" y="430" as="geometry" />
        </mxCell>
        <mxCell id="z1vnc6DWJGNIZR1WN-FW-2" edge="1" parent="1" source="z1vnc6DWJGNIZR1WN-FW-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" target="z1vnc6DWJGNIZR1WN-FW-14">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="z1vnc6DWJGNIZR1WN-FW-3" parent="1" style="rounded=0;whiteSpace=wrap;html=1;" value="" vertex="1">
          <mxGeometry height="60" width="130" x="1390" y="590" as="geometry" />
        </mxCell>
        <mxCell id="z1vnc6DWJGNIZR1WN-FW-4" parent="1" style="text;html=1;whiteSpace=wrap;overflow=hidden;rounded=0;" value="&lt;h1 style=&quot;margin-top: 0px;&quot;&gt;Notification System&lt;/h1&gt;&lt;p&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;F&lt;/font&gt;&lt;font style=&quot;font-size: 18px;&quot;&gt;unctional Requirements&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font size=&quot;3&quot;&gt;1. System should be able to send multiple type of notifications like sms email, in app;&lt;br&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;2. Messages can have priority high, medium, low.&lt;br&gt;3. Notification status can be tracked.&lt;br&gt;4. Users can set thier preference whether to get notification.&lt;br&gt;5. Scheduled notifications support can be there.&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font size=&quot;3&quot;&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font size=&quot;3&quot;&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;Non functional&amp;nbsp;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font size=&quot;3&quot;&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;1. Availability - System should be highly available&lt;br&gt;2. Scale - Should handle 1M&amp;nbsp;&lt;br&gt;3. Fault tolerance&lt;br&gt;4. Latency 5 sec for critical and 10 sec for low priority messages&lt;br&gt;&lt;br&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font size=&quot;3&quot;&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font size=&quot;3&quot;&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;" vertex="1">
          <mxGeometry height="260" width="610" x="210" y="490" as="geometry" />
        </mxCell>
        <mxCell id="z1vnc6DWJGNIZR1WN-FW-5" parent="1" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" value="Client" vertex="1">
          <mxGeometry height="80" width="80" x="960" y="580" as="geometry" />
        </mxCell>
        <mxCell id="z1vnc6DWJGNIZR1WN-FW-6" edge="1" parent="1" source="z1vnc6DWJGNIZR1WN-FW-8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" target="z1vnc6DWJGNIZR1WN-FW-10">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="z1vnc6DWJGNIZR1WN-FW-7" edge="1" parent="1" source="z1vnc6DWJGNIZR1WN-FW-8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" target="z1vnc6DWJGNIZR1WN-FW-29">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="z1vnc6DWJGNIZR1WN-FW-8" parent="1" style="rounded=0;whiteSpace=wrap;html=1;" value="API Gateway" vertex="1">
          <mxGeometry height="260" width="90" x="1170" y="500" as="geometry" />
        </mxCell>
        <mxCell id="z1vnc6DWJGNIZR1WN-FW-9" edge="1" parent="1" source="z1vnc6DWJGNIZR1WN-FW-5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.462;entryDx=0;entryDy=0;entryPerimeter=0;" target="z1vnc6DWJGNIZR1WN-FW-8">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="z1vnc6DWJGNIZR1WN-FW-10" parent="1" style="rounded=0;whiteSpace=wrap;html=1;" value="Notification Service" vertex="1">
          <mxGeometry height="60" width="120" x="1380" y="600" as="geometry" />
        </mxCell>
        <mxCell id="z1vnc6DWJGNIZR1WN-FW-11" edge="1" parent="1" source="z1vnc6DWJGNIZR1WN-FW-14" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" target="z1vnc6DWJGNIZR1WN-FW-19">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="z1vnc6DWJGNIZR1WN-FW-12" edge="1" parent="1" source="z1vnc6DWJGNIZR1WN-FW-14" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" target="z1vnc6DWJGNIZR1WN-FW-21">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="z1vnc6DWJGNIZR1WN-FW-13" edge="1" parent="1" source="z1vnc6DWJGNIZR1WN-FW-14" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" target="z1vnc6DWJGNIZR1WN-FW-17">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="z1vnc6DWJGNIZR1WN-FW-14" parent="1" style="rounded=0;whiteSpace=wrap;html=1;" value="Kafka" vertex="1">
          <mxGeometry height="60" width="190" x="1650" y="590" as="geometry" />
        </mxCell>
        <mxCell id="z1vnc6DWJGNIZR1WN-FW-15" edge="1" parent="1" source="z1vnc6DWJGNIZR1WN-FW-17" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" target="z1vnc6DWJGNIZR1WN-FW-22">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="z1vnc6DWJGNIZR1WN-FW-16" edge="1" parent="1" source="z1vnc6DWJGNIZR1WN-FW-17" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" target="z1vnc6DWJGNIZR1WN-FW-32" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="z1vnc6DWJGNIZR1WN-FW-17" parent="1" style="rounded=0;whiteSpace=wrap;html=1;" value="Email" vertex="1">
          <mxGeometry height="50" width="140" x="1960" y="490" as="geometry" />
        </mxCell>
        <mxCell id="z1vnc6DWJGNIZR1WN-FW-18" edge="1" parent="1" source="z1vnc6DWJGNIZR1WN-FW-19" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" target="z1vnc6DWJGNIZR1WN-FW-23">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="z1vnc6DWJGNIZR1WN-FW-19" parent="1" style="rounded=0;whiteSpace=wrap;html=1;" value="SMS" vertex="1">
          <mxGeometry height="60" width="140" x="1960" y="590" as="geometry" />
        </mxCell>
        <mxCell id="z1vnc6DWJGNIZR1WN-FW-20" edge="1" parent="1" source="z1vnc6DWJGNIZR1WN-FW-21" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" target="z1vnc6DWJGNIZR1WN-FW-24">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="2170" y="730" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="z1vnc6DWJGNIZR1WN-FW-21" parent="1" style="rounded=0;whiteSpace=wrap;html=1;" value="In APP" vertex="1">
          <mxGeometry height="60" width="140" x="1960" y="700" as="geometry" />
        </mxCell>
        <mxCell id="z1vnc6DWJGNIZR1WN-FW-22" parent="1" style="rounded=0;whiteSpace=wrap;html=1;" value="Email Providors" vertex="1">
          <mxGeometry height="60" width="120" x="2170" y="485" as="geometry" />
        </mxCell>
        <mxCell id="z1vnc6DWJGNIZR1WN-FW-23" parent="1" style="rounded=0;whiteSpace=wrap;html=1;" value="SMS strikers" vertex="1">
          <mxGeometry height="60" width="120" x="2170" y="590" as="geometry" />
        </mxCell>
        <mxCell id="z1vnc6DWJGNIZR1WN-FW-24" parent="1" style="rounded=0;whiteSpace=wrap;html=1;" value="firebase/APN" vertex="1">
          <mxGeometry height="60" width="120" x="2170" y="700" as="geometry" />
        </mxCell>
        <mxCell id="z1vnc6DWJGNIZR1WN-FW-25" parent="1" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;" value="Postgres" vertex="1">
          <mxGeometry height="170" width="120" x="1380" y="800" as="geometry" />
        </mxCell>
        <mxCell id="z1vnc6DWJGNIZR1WN-FW-26" edge="1" parent="1" source="z1vnc6DWJGNIZR1WN-FW-10" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;" target="z1vnc6DWJGNIZR1WN-FW-25">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="z1vnc6DWJGNIZR1WN-FW-27" parent="1" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;" value="&lt;font style=&quot;font-size: 18px;&quot;&gt;notifications.email.high&lt;/font&gt;&lt;div&gt;&lt;font style=&quot;font-size: 18px;&quot;&gt;notifications.email.medium&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;notifications.email.low&lt;br&gt;&lt;br&gt;retry topic&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;dead letter queue&lt;/font&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="140" width="220" x="1640" y="670" as="geometry" />
        </mxCell>
        <mxCell id="z1vnc6DWJGNIZR1WN-FW-28" edge="1" parent="1" source="z1vnc6DWJGNIZR1WN-FW-29" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" target="z1vnc6DWJGNIZR1WN-FW-30" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="z1vnc6DWJGNIZR1WN-FW-29" parent="1" style="rounded=0;whiteSpace=wrap;html=1;" value="User Prefernce Svc" vertex="1">
          <mxGeometry height="60" width="120" x="1380" y="450" as="geometry" />
        </mxCell>
        <mxCell id="z1vnc6DWJGNIZR1WN-FW-30" parent="1" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;" value="Postgres" vertex="1">
          <mxGeometry height="130" width="110" x="1640" y="300" as="geometry" />
        </mxCell>
        <mxCell id="z1vnc6DWJGNIZR1WN-FW-31" edge="1" parent="1" source="z1vnc6DWJGNIZR1WN-FW-17" style="endArrow=classic;html=1;rounded=0;exitX=0;exitY=0;exitDx=0;exitDy=0;" target="z1vnc6DWJGNIZR1WN-FW-30" value="">
          <mxGeometry height="50" relative="1" width="50" as="geometry">
            <mxPoint x="1670" y="520" as="sourcePoint" />
            <mxPoint x="1720" y="470" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="z1vnc6DWJGNIZR1WN-FW-32" parent="1" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" value="Redis" vertex="1">
          <mxGeometry height="110" width="110" x="1975" y="290" as="geometry" />
        </mxCell>
        <mxCell id="z1vnc6DWJGNIZR1WN-FW-33" edge="1" parent="1" source="z1vnc6DWJGNIZR1WN-FW-30" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.088;entryY=0.694;entryDx=0;entryDy=0;entryPerimeter=0;" target="z1vnc6DWJGNIZR1WN-FW-32">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="z1vnc6DWJGNIZR1WN-FW-34" parent="1" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;" value="&lt;font style=&quot;font-size: 24px;&quot;&gt;&lt;b&gt;Deep dives&lt;/b&gt;&lt;/font&gt;&lt;div&gt;&lt;font style=&quot;font-size: 24px;&quot;&gt;1. We can use multiple 3rd party providers for reliability&amp;nbsp;&lt;/font&gt;&lt;span style=&quot;font-size: 24px; background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;and retry logic to handle errors&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 24px;&quot;&gt;2. We write the notification in db first and then push to kafka&lt;br&gt;3. If consumer fails to send we will retry if consumer goes down&amp;nbsp;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 24px;&quot;&gt;kafka wil rediver when consumer comes up&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 24px;&quot;&gt;4. Handle idempotency by storing the notification id as idempotency key&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 24px;&quot;&gt;5.&amp;nbsp;&lt;/font&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="300" width="1060" x="1130" y="1140" as="geometry" />
        </mxCell>
        <mxCell id="z1vnc6DWJGNIZR1WN-FW-35" parent="1" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;" value="&lt;font style=&quot;font-size: 18px;&quot;&gt;Notification table&lt;br&gt;&lt;/font&gt;&lt;span style=&quot;font-size: 18px; background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;1. id&lt;/span&gt;&lt;div&gt;&lt;span style=&quot;font-size: 18px; background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;2. Sender&amp;nbsp;&lt;br&gt;3. reciver&lt;br&gt;4. type&lt;br&gt;5. priority&lt;br&gt;6.status&lt;br&gt;7. payload&lt;br&gt;8. userid&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 18px;&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="200" width="170" x="1500" y="820" as="geometry" />
        </mxCell>
        <mxCell id="z1vnc6DWJGNIZR1WN-FW-36" parent="1" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;Prefernce Table&lt;br&gt;1. UserId&lt;br&gt;2. Optin&lt;br&gt;3.&lt;/font&gt;" vertex="1">
          <mxGeometry height="60" width="130" x="1700" y="800" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="wlloCA3cmls4olU10xto" name="Logging">
    <mxGraphModel dx="1958" dy="1358" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="Q0HEUE5PoKdTyBh6viSr-1" parent="1" style="text;html=1;whiteSpace=wrap;overflow=hidden;rounded=0;" value="&lt;h1 style=&quot;margin-top: 0px;&quot;&gt;Logging System&lt;/h1&gt;&lt;p&gt;&lt;font style=&quot;font-size: 18px;&quot;&gt;&lt;b&gt;Requirements&lt;/b&gt;&lt;br&gt;1. System should be able to injest data from multiple sources&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font size=&quot;3&quot;&gt;2. It should be able to parse, process and store in structured format.&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font size=&quot;3&quot;&gt;3. View the logs in near real time.&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font size=&quot;3&quot;&gt;4. Injest Batch jobs or realtime jobs.&amp;nbsp;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font size=&quot;3&quot;&gt;5. Alerts&amp;nbsp;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;&lt;font size=&quot;3&quot;&gt;Non Functional Requirements&lt;/font&gt;&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;font size=&quot;3&quot;&gt;1. Scalability: System should be able to Scale to handle high load&lt;br&gt;2. Durability: We should be able to store logs without data loss&lt;br&gt;3. Latency: Near realtime logs 5s&amp;nbsp;&lt;br&gt;4. Availability: High availability &amp;gt;&amp;gt; Consistency&lt;br&gt;5. Fault tolerance : System should work if something fails&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font size=&quot;3&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font size=&quot;3&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;" vertex="1">
          <mxGeometry height="380" width="550" x="70" y="300" as="geometry" />
        </mxCell>
        <mxCell id="Q0HEUE5PoKdTyBh6viSr-4" edge="1" parent="1" source="Q0HEUE5PoKdTyBh6viSr-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" target="Q0HEUE5PoKdTyBh6viSr-3" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Q0HEUE5PoKdTyBh6viSr-2" parent="1" style="ellipse;whiteSpace=wrap;html=1;" value="Client&amp;nbsp;" vertex="1">
          <mxGeometry height="80" width="120" x="720" y="480" as="geometry" />
        </mxCell>
        <mxCell id="Q0HEUE5PoKdTyBh6viSr-6" edge="1" parent="1" source="Q0HEUE5PoKdTyBh6viSr-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" target="Q0HEUE5PoKdTyBh6viSr-5" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Q0HEUE5PoKdTyBh6viSr-3" parent="1" style="whiteSpace=wrap;html=1;" value="Api Gateway" vertex="1">
          <mxGeometry height="510" width="120" x="990" y="420" as="geometry" />
        </mxCell>
        <mxCell id="Q0HEUE5PoKdTyBh6viSr-11" edge="1" parent="1" source="Q0HEUE5PoKdTyBh6viSr-5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" target="Q0HEUE5PoKdTyBh6viSr-10">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Q0HEUE5PoKdTyBh6viSr-5" parent="1" style="whiteSpace=wrap;html=1;" value="Ingestion Svc" vertex="1">
          <mxGeometry height="60" width="120" x="1290" y="480" as="geometry" />
        </mxCell>
        <mxCell id="Q0HEUE5PoKdTyBh6viSr-9" parent="1" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;" value="Core Entities&lt;div&gt;1. Service&lt;/div&gt;&lt;div&gt;2. Log&lt;/div&gt;&lt;div&gt;3.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="30" width="100" x="80" y="710" as="geometry" />
        </mxCell>
        <mxCell id="Q0HEUE5PoKdTyBh6viSr-25" edge="1" parent="1" source="Q0HEUE5PoKdTyBh6viSr-10" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" target="Q0HEUE5PoKdTyBh6viSr-23">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Q0HEUE5PoKdTyBh6viSr-39" edge="1" parent="1" source="Q0HEUE5PoKdTyBh6viSr-10" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.75;entryDx=0;entryDy=0;" target="Q0HEUE5PoKdTyBh6viSr-19">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Q0HEUE5PoKdTyBh6viSr-10" parent="1" style="rounded=1;whiteSpace=wrap;html=1;" value="Kafka" vertex="1">
          <mxGeometry height="60" width="390" x="1540" y="480" as="geometry" />
        </mxCell>
        <mxCell id="Q0HEUE5PoKdTyBh6viSr-12" parent="1" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;" value="Partition by Service+Instanceid" vertex="1">
          <mxGeometry height="50" width="310" x="1610" y="420" as="geometry" />
        </mxCell>
        <mxCell id="Q0HEUE5PoKdTyBh6viSr-19" parent="1" style="rounded=0;whiteSpace=wrap;html=1;" value="Post Processing svc" vertex="1">
          <mxGeometry height="60" width="120" x="1930" y="680" as="geometry" />
        </mxCell>
        <mxCell id="Q0HEUE5PoKdTyBh6viSr-26" edge="1" parent="1" source="Q0HEUE5PoKdTyBh6viSr-23" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" target="Q0HEUE5PoKdTyBh6viSr-24">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Q0HEUE5PoKdTyBh6viSr-23" parent="1" style="rounded=0;whiteSpace=wrap;html=1;" value="S3 Consumer svc" vertex="1">
          <mxGeometry height="60" width="120" x="2068" y="480" as="geometry" />
        </mxCell>
        <mxCell id="Q0HEUE5PoKdTyBh6viSr-24" parent="1" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" value="S3" vertex="1">
          <mxGeometry height="130" width="130" x="2260" y="320" as="geometry" />
        </mxCell>
        <mxCell id="Q0HEUE5PoKdTyBh6viSr-28" parent="1" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;" value="Elastic search" vertex="1">
          <mxGeometry height="170" width="140" x="1610" y="740" as="geometry" />
        </mxCell>
        <mxCell id="Q0HEUE5PoKdTyBh6viSr-30" edge="1" parent="1" source="Q0HEUE5PoKdTyBh6viSr-19" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" target="Q0HEUE5PoKdTyBh6viSr-28">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Q0HEUE5PoKdTyBh6viSr-32" parent="1" style="ellipse;whiteSpace=wrap;html=1;" value="Dashboard" vertex="1">
          <mxGeometry height="80" width="120" x="700" y="780" as="geometry" />
        </mxCell>
        <mxCell id="Q0HEUE5PoKdTyBh6viSr-34" edge="1" parent="1" source="Q0HEUE5PoKdTyBh6viSr-32" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=-0.016;entryY=0.784;entryDx=0;entryDy=0;entryPerimeter=0;" target="Q0HEUE5PoKdTyBh6viSr-3">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Q0HEUE5PoKdTyBh6viSr-36" parent="1" style="rounded=0;whiteSpace=wrap;html=1;" value="Dashboard svc" vertex="1">
          <mxGeometry height="60" width="120" x="1290" y="815" as="geometry" />
        </mxCell>
        <mxCell id="Q0HEUE5PoKdTyBh6viSr-37" edge="1" parent="1" style="endArrow=classic;html=1;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" target="Q0HEUE5PoKdTyBh6viSr-36" value="">
          <mxGeometry height="50" relative="1" width="50" as="geometry">
            <mxPoint x="1120" y="820" as="sourcePoint" />
            <mxPoint x="1650" y="650" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Q0HEUE5PoKdTyBh6viSr-38" edge="1" parent="1" source="Q0HEUE5PoKdTyBh6viSr-36" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=-0.027;entryY=0.608;entryDx=0;entryDy=0;entryPerimeter=0;" target="Q0HEUE5PoKdTyBh6viSr-28">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Q0HEUE5PoKdTyBh6viSr-43" parent="1" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;" value="&lt;font style=&quot;font-size: 24px;&quot;&gt;DeepDives&lt;/font&gt;&lt;div&gt;&lt;font style=&quot;font-size: 24px;&quot;&gt;1. Store Hot Data last month in Elastic search and then delete from it.&lt;br&gt;2. Store in s3 for long term.&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 24px;&quot;&gt;3. elastic serach indexes are two level&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 24px;&quot;&gt;outer and then inner inner index store the word to doc mapping.&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 24px;&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 24px;&quot;&gt;4. It has a fast index which find doc between range of dates and then takes intersection&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 24px;&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="300" width="610" x="1070" y="1260" as="geometry" />
        </mxCell>
        <mxCell id="hIWIOdOqERmVwW91YGsM-1" parent="1" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;" value="&lt;font style=&quot;font-size: 24px;&quot;&gt;ALerts DB&lt;/font&gt;" vertex="1">
          <mxGeometry height="150" width="130" x="1380" y="1010" as="geometry" />
        </mxCell>
        <mxCell id="hIWIOdOqERmVwW91YGsM-2" edge="1" parent="1" source="Q0HEUE5PoKdTyBh6viSr-36" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.4;entryY=0.044;entryDx=0;entryDy=0;entryPerimeter=0;" target="hIWIOdOqERmVwW91YGsM-1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hIWIOdOqERmVwW91YGsM-3" parent="1" style="rounded=0;whiteSpace=wrap;html=1;" value="&lt;b&gt;&lt;font style=&quot;font-size: 24px;&quot;&gt;Notification&lt;/font&gt;&lt;/b&gt;" vertex="1">
          <mxGeometry height="100" width="220" x="1940" y="1100" as="geometry" />
        </mxCell>
        <mxCell id="hIWIOdOqERmVwW91YGsM-5" parent="1" style="rounded=1;whiteSpace=wrap;html=1;" value="&lt;font style=&quot;font-size: 24px;&quot;&gt;Kafka&lt;/font&gt;" vertex="1">
          <mxGeometry height="60" width="250" x="1660" y="980" as="geometry" />
        </mxCell>
        <mxCell id="hIWIOdOqERmVwW91YGsM-7" edge="1" parent="1" source="hIWIOdOqERmVwW91YGsM-5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.397;entryY=0.016;entryDx=0;entryDy=0;entryPerimeter=0;" target="hIWIOdOqERmVwW91YGsM-3">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hIWIOdOqERmVwW91YGsM-10" edge="1" parent="1" source="Q0HEUE5PoKdTyBh6viSr-36" style="curved=1;endArrow=classic;html=1;rounded=0;exitX=0.75;exitY=1;exitDx=0;exitDy=0;" target="hIWIOdOqERmVwW91YGsM-5" value="">
          <mxGeometry height="50" relative="1" width="50" as="geometry">
            <Array as="points">
              <mxPoint x="1550" y="980" />
              <mxPoint x="1500" y="930" />
            </Array>
            <mxPoint x="1500" y="980" as="sourcePoint" />
            <mxPoint x="1550" y="930" as="targetPoint" />
          </mxGeometry>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="k5qdmLQm2Xb7yK3ysXdZ" name="Web Crawler">
    <mxGraphModel grid="1" page="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="T8vJwXz3WjrJh8kI5gCK-24" parent="1" style="rounded=0;whiteSpace=wrap;html=1;" value="" vertex="1">
          <mxGeometry height="60" width="120" x="2580" y="790" as="geometry" />
        </mxCell>
        <mxCell id="T8vJwXz3WjrJh8kI5gCK-16" parent="1" style="rounded=0;whiteSpace=wrap;html=1;" value="" vertex="1">
          <mxGeometry height="80" width="170" x="1850" y="390" as="geometry" />
        </mxCell>
        <mxCell id="3gRIJuh5Le2ODNyZIflX-1" parent="1" style="text;html=1;whiteSpace=wrap;overflow=hidden;rounded=0;" value="&lt;h1 style=&quot;margin-top: 0px;&quot;&gt;Web crawler&lt;/h1&gt;&lt;p&gt;&lt;b&gt;FR&lt;/b&gt;&lt;/p&gt;&lt;p&gt;1. Should have some seed url and it should crawl the web from it.&lt;/p&gt;&lt;p&gt;2. Extract the html and store it.&lt;/p&gt;&lt;p&gt;3. Parse the html and find the url present in the page and collect those url for further crawling.&lt;/p&gt;&lt;p&gt;&lt;b style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;&lt;br&gt;NFR&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;b style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;1. &lt;/b&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;Should crawl 10 Billion pages in 10 days&lt;br&gt;2. Efficient crawl&lt;br&gt;3. Politeness&lt;br&gt;4. Fault tolerance&lt;br&gt;&lt;br&gt;&lt;br&gt;Core Entity&lt;br&gt;1. Text Data&lt;br&gt;2. Url data&lt;br&gt;3. Domain data&lt;/span&gt;&lt;/p&gt;" vertex="1">
          <mxGeometry height="380" width="360" x="100" y="130" as="geometry" />
        </mxCell>
        <mxCell id="T8vJwXz3WjrJh8kI5gCK-11" edge="1" parent="1" source="T8vJwXz3WjrJh8kI5gCK-1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" target="T8vJwXz3WjrJh8kI5gCK-10">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="T8vJwXz3WjrJh8kI5gCK-1" parent="1" style="rounded=1;whiteSpace=wrap;html=1;" value="SQS" vertex="1">
          <mxGeometry height="60" width="330" x="1330" y="420" as="geometry" />
        </mxCell>
        <mxCell id="T8vJwXz3WjrJh8kI5gCK-9" edge="1" parent="1" source="T8vJwXz3WjrJh8kI5gCK-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" target="T8vJwXz3WjrJh8kI5gCK-1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="T8vJwXz3WjrJh8kI5gCK-2" parent="1" style="rounded=0;whiteSpace=wrap;html=1;" value="Seed Service&amp;nbsp;" vertex="1">
          <mxGeometry height="80" width="150" x="1000" y="410" as="geometry" />
        </mxCell>
        <mxCell id="T8vJwXz3WjrJh8kI5gCK-3" parent="1" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;" value="DB" vertex="1">
          <mxGeometry height="140" width="100" x="1150" y="130" as="geometry" />
        </mxCell>
        <mxCell id="T8vJwXz3WjrJh8kI5gCK-7" edge="1" parent="1" source="T8vJwXz3WjrJh8kI5gCK-4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" target="T8vJwXz3WjrJh8kI5gCK-2">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="980" y="450" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="T8vJwXz3WjrJh8kI5gCK-4" parent="1" style="rounded=0;whiteSpace=wrap;html=1;" value="API Gateway" vertex="1">
          <mxGeometry height="420" width="120" x="740" y="240" as="geometry" />
        </mxCell>
        <mxCell id="T8vJwXz3WjrJh8kI5gCK-6" edge="1" parent="1" source="T8vJwXz3WjrJh8kI5gCK-5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" target="T8vJwXz3WjrJh8kI5gCK-4" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="T8vJwXz3WjrJh8kI5gCK-5" parent="1" style="ellipse;whiteSpace=wrap;html=1;" value="Client" vertex="1">
          <mxGeometry height="80" width="120" x="530" y="410" as="geometry" />
        </mxCell>
        <mxCell id="T8vJwXz3WjrJh8kI5gCK-8" edge="1" parent="1" source="T8vJwXz3WjrJh8kI5gCK-2" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" value="">
          <mxGeometry height="50" relative="1" width="50" as="geometry">
            <mxPoint x="1150" y="340" as="sourcePoint" />
            <mxPoint x="1200" y="280" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="T8vJwXz3WjrJh8kI5gCK-10" parent="1" style="rounded=0;whiteSpace=wrap;html=1;" value="Wrokers" vertex="1">
          <mxGeometry height="80" width="180" x="1830" y="410" as="geometry" />
        </mxCell>
        <mxCell id="T8vJwXz3WjrJh8kI5gCK-12" parent="1" style="ellipse;whiteSpace=wrap;html=1;" value="Website" vertex="1">
          <mxGeometry height="80" width="120" x="1850" y="120" as="geometry" />
        </mxCell>
        <mxCell id="T8vJwXz3WjrJh8kI5gCK-13" edge="1" parent="1" source="T8vJwXz3WjrJh8kI5gCK-10" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.642;entryY=1.028;entryDx=0;entryDy=0;entryPerimeter=0;" target="T8vJwXz3WjrJh8kI5gCK-12">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="T8vJwXz3WjrJh8kI5gCK-14" parent="1" style="rounded=0;whiteSpace=wrap;html=1;" value="DNS" vertex="1">
          <mxGeometry height="60" width="120" x="1620" y="170" as="geometry" />
        </mxCell>
        <mxCell id="T8vJwXz3WjrJh8kI5gCK-15" edge="1" parent="1" source="T8vJwXz3WjrJh8kI5gCK-10" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" target="T8vJwXz3WjrJh8kI5gCK-14" value="">
          <mxGeometry height="50" relative="1" width="50" as="geometry">
            <mxPoint x="1540" y="340" as="sourcePoint" />
            <mxPoint x="1590" y="290" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="T8vJwXz3WjrJh8kI5gCK-17" parent="1" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" value="Redis" vertex="1">
          <mxGeometry height="80" width="80" x="2130" y="220" as="geometry" />
        </mxCell>
        <mxCell id="T8vJwXz3WjrJh8kI5gCK-18" edge="1" parent="1" source="T8vJwXz3WjrJh8kI5gCK-10" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" target="T8vJwXz3WjrJh8kI5gCK-17" value="">
          <mxGeometry height="50" relative="1" width="50" as="geometry">
            <mxPoint x="2080" y="670" as="sourcePoint" />
            <mxPoint x="2130" y="620" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="T8vJwXz3WjrJh8kI5gCK-19" parent="1" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;" value="Rate Limitter based on domain&amp;nbsp;" vertex="1">
          <mxGeometry height="30" width="60" x="2240" y="245" as="geometry" />
        </mxCell>
        <mxCell id="T8vJwXz3WjrJh8kI5gCK-20" edge="1" parent="1" source="T8vJwXz3WjrJh8kI5gCK-10" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" target="T8vJwXz3WjrJh8kI5gCK-21" value="">
          <mxGeometry height="50" relative="1" width="50" as="geometry">
            <mxPoint x="2020" y="640" as="sourcePoint" />
            <mxPoint x="2070" y="590" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="T8vJwXz3WjrJh8kI5gCK-21" parent="1" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;" value="&lt;b&gt;DB&lt;/b&gt;" vertex="1">
          <mxGeometry height="180" width="150" x="2460" y="310" as="geometry" />
        </mxCell>
        <mxCell id="T8vJwXz3WjrJh8kI5gCK-26" edge="1" parent="1" source="T8vJwXz3WjrJh8kI5gCK-22" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" target="T8vJwXz3WjrJh8kI5gCK-23" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="T8vJwXz3WjrJh8kI5gCK-22" parent="1" style="rounded=0;whiteSpace=wrap;html=1;" value="&lt;font style=&quot;font-size: 18px;&quot;&gt;Parser&lt;/font&gt;" vertex="1">
          <mxGeometry height="60" width="120" x="2590" y="770" as="geometry" />
        </mxCell>
        <mxCell id="T8vJwXz3WjrJh8kI5gCK-23" parent="1" style="rounded=1;whiteSpace=wrap;html=1;" value="&lt;font style=&quot;font-size: 18px;&quot;&gt;Kafka&lt;/font&gt;" vertex="1">
          <mxGeometry height="60" width="320" x="2130" y="770" as="geometry" />
        </mxCell>
        <mxCell id="T8vJwXz3WjrJh8kI5gCK-25" edge="1" parent="1" source="T8vJwXz3WjrJh8kI5gCK-10" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" value="">
          <mxGeometry height="50" relative="1" width="50" as="geometry">
            <mxPoint x="2410" y="630" as="sourcePoint" />
            <mxPoint x="2130" y="800" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="T8vJwXz3WjrJh8kI5gCK-27" parent="1" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" value="S3" vertex="1">
          <mxGeometry height="80" width="80" x="2485" y="110" as="geometry" />
        </mxCell>
        <mxCell id="T8vJwXz3WjrJh8kI5gCK-28" edge="1" parent="1" source="T8vJwXz3WjrJh8kI5gCK-10" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=1;entryDx=0;entryDy=0;" target="T8vJwXz3WjrJh8kI5gCK-27" value="">
          <mxGeometry height="50" relative="1" width="50" as="geometry">
            <mxPoint x="2410" y="630" as="sourcePoint" />
            <mxPoint x="2460" y="580" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="T8vJwXz3WjrJh8kI5gCK-29" edge="1" parent="1" style="curved=1;endArrow=classic;html=1;rounded=0;" value="">
          <mxGeometry height="50" relative="1" width="50" as="geometry">
            <Array as="points">
              <mxPoint x="2740" y="800" />
              <mxPoint x="2720" y="760" />
              <mxPoint x="2810" y="410" />
            </Array>
            <mxPoint x="2720" y="810" as="sourcePoint" />
            <mxPoint x="2570" y="170" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="T8vJwXz3WjrJh8kI5gCK-30" edge="1" parent="1" source="T8vJwXz3WjrJh8kI5gCK-22" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;entryPerimeter=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" target="T8vJwXz3WjrJh8kI5gCK-21" value="">
          <mxGeometry height="50" relative="1" width="50" as="geometry">
            <mxPoint x="2640" y="750" as="sourcePoint" />
            <mxPoint x="2460" y="580" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="T8vJwXz3WjrJh8kI5gCK-43" connectable="0" parent="T8vJwXz3WjrJh8kI5gCK-30" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" value="Store the new Urls" vertex="1">
          <mxGeometry relative="1" x="0.2699" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="T8vJwXz3WjrJh8kI5gCK-33" parent="1" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;" value="&lt;b&gt;Urls Table&lt;/b&gt;&lt;div&gt;1. Url Id&lt;/div&gt;&lt;div&gt;2. URL&lt;/div&gt;&lt;div&gt;2. last cralwed time&lt;/div&gt;&lt;div&gt;3. S3 url&lt;/div&gt;&lt;div&gt;4. Text&lt;/div&gt;&lt;div&gt;5. Dedup hash&amp;nbsp;&lt;/div&gt;" vertex="1">
          <mxGeometry height="110" width="120" x="2830" y="370" as="geometry" />
        </mxCell>
        <mxCell id="T8vJwXz3WjrJh8kI5gCK-34" parent="1" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;" value="&lt;b&gt;Domain Table&lt;/b&gt;&lt;div&gt;!. domian Id&amp;nbsp;&lt;br&gt;2. domain name&lt;br&gt;3. crawl delay&lt;br&gt;4. last crawl time&lt;br&gt;5. robo.txt as txt&lt;/div&gt;" vertex="1">
          <mxGeometry height="100" width="90" x="2840" y="500" as="geometry" />
        </mxCell>
        <mxCell id="T8vJwXz3WjrJh8kI5gCK-36" parent="1" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" value="Redis" vertex="1">
          <mxGeometry height="80" width="80" x="2130" y="520" as="geometry" />
        </mxCell>
        <mxCell id="T8vJwXz3WjrJh8kI5gCK-37" edge="1" parent="1" style="endArrow=classic;html=1;rounded=0;entryX=0;entryY=0;entryDx=0;entryDy=0;" target="T8vJwXz3WjrJh8kI5gCK-36" value="">
          <mxGeometry height="50" relative="1" width="50" as="geometry">
            <mxPoint x="2010" y="460" as="sourcePoint" />
            <mxPoint x="2470" y="490" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="T8vJwXz3WjrJh8kI5gCK-38" parent="1" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;" value="Create index on Dedup hash to check if the html is already seen. Then see if they present donot crawl again or crawl after some delay.&lt;br&gt;&lt;br&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="160" width="130" x="3010" y="420" as="geometry" />
        </mxCell>
        <mxCell id="T8vJwXz3WjrJh8kI5gCK-39" parent="1" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;" value="&lt;font style=&quot;font-size: 18px;&quot;&gt;&lt;b&gt;Deepdive&lt;/b&gt;&amp;nbsp;&lt;br&gt;1. Politeness : Donot hit a url twice which is seen&amp;nbsp;&lt;br&gt;2. Donot parse a html is already seen&lt;/font&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;3. Set visibilty timeout if the worker fails to fetch html. after sometime another worker can rerty&lt;br&gt;3. If worker dies then also vosobilty timeout allows no one to see the meessage for time. after expiry other workers can pick the task.&amp;nbsp;&lt;br&gt;4. Redis can be use to rate limit the domain hits using some rate limitter&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;5.&amp;nbsp;&amp;nbsp;&lt;/font&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="230" width="755" x="2895" y="640" as="geometry" />
        </mxCell>
        <mxCell id="T8vJwXz3WjrJh8kI5gCK-40" edge="1" parent="1" style="curved=1;endArrow=classic;html=1;rounded=0;entryX=0.083;entryY=0.99;entryDx=0;entryDy=0;entryPerimeter=0;" target="T8vJwXz3WjrJh8kI5gCK-1" value="">
          <mxGeometry height="50" relative="1" width="50" as="geometry">
            <Array as="points">
              <mxPoint x="2630" y="870" />
              <mxPoint x="2580" y="850" />
              <mxPoint x="2160" y="1170" />
            </Array>
            <mxPoint x="2650" y="830" as="sourcePoint" />
            <mxPoint x="1190" y="570" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="T8vJwXz3WjrJh8kI5gCK-41" connectable="0" parent="T8vJwXz3WjrJh8kI5gCK-40" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" value="&lt;font style=&quot;font-size: 18px;&quot;&gt;Push the new urls to the queue&lt;/font&gt;" vertex="1">
          <mxGeometry relative="1" x="-0.3843" y="-95" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="T8vJwXz3WjrJh8kI5gCK-42" parent="1" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;" value="&lt;font style=&quot;font-size: 18px;&quot;&gt;1.&amp;nbsp; Fetch the HTML url from s3&lt;/font&gt;&lt;div&gt;&lt;font style=&quot;font-size: 18px;&quot;&gt;2. Extract the Text and urls&lt;br&gt;&lt;/font&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="30" width="200" x="2650" y="270" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="8k6XovYEf2hSqVjO03Gp" name="Uber">
    <mxGraphModel dx="1259" dy="873" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="hYD4kwpyHkv21KdUr4Sz-1" parent="1" style="text;html=1;whiteSpace=wrap;overflow=hidden;rounded=0;" value="&lt;h1 style=&quot;margin-top: 0px;&quot;&gt;Uber&lt;/h1&gt;&lt;p&gt;&lt;b&gt;FR&lt;/b&gt;&lt;/p&gt;&lt;p&gt;1. User can see nearest 10 driver once opens the app.&lt;br&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;2. User can add src and destination and get an estimate of fare.&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;3. User can book a ride.&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;4. Drivers should be able to accept/reject rides&lt;br&gt;5. Driver can start and end rides.&lt;br&gt;6. Live location of driver after accepting&lt;br&gt;&lt;br&gt;&lt;b&gt;NFR&lt;br&gt;&lt;br&gt;1. &lt;/b&gt;Scalablility&lt;b&gt;: &lt;/b&gt;High&lt;b&gt;&amp;nbsp;&lt;/b&gt;Scalability during 100k of requests per second&lt;br&gt;2. Low latency of matching&lt;br&gt;3. Consistency in matching&lt;br&gt;4. Highly available outside matching&lt;br&gt;5. Fault tolerance&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;Core Entity&lt;br&gt;&lt;br&gt;1. Drivers&lt;br&gt;2. Riders&lt;br&gt;3. Ride&lt;br&gt;4. Fare&lt;br&gt;5. Location&lt;/p&gt;" vertex="1">
          <mxGeometry height="470" width="370" x="70" y="130" as="geometry" />
        </mxCell>
        <mxCell id="hYD4kwpyHkv21KdUr4Sz-4" edge="1" parent="1" source="hYD4kwpyHkv21KdUr4Sz-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" target="hYD4kwpyHkv21KdUr4Sz-3" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hYD4kwpyHkv21KdUr4Sz-2" parent="1" style="ellipse;whiteSpace=wrap;html=1;" value="Rider" vertex="1">
          <mxGeometry height="80" width="120" x="590" y="250" as="geometry" />
        </mxCell>
        <mxCell id="hYD4kwpyHkv21KdUr4Sz-6" edge="1" parent="1" source="hYD4kwpyHkv21KdUr4Sz-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" target="hYD4kwpyHkv21KdUr4Sz-5" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hYD4kwpyHkv21KdUr4Sz-8" edge="1" parent="1" source="hYD4kwpyHkv21KdUr4Sz-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" target="hYD4kwpyHkv21KdUr4Sz-7" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hYD4kwpyHkv21KdUr4Sz-10" edge="1" parent="1" source="hYD4kwpyHkv21KdUr4Sz-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" target="hYD4kwpyHkv21KdUr4Sz-9" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hYD4kwpyHkv21KdUr4Sz-3" parent="1" style="whiteSpace=wrap;html=1;" value="Api gateway" vertex="1">
          <mxGeometry height="400" width="120" x="790" y="170" as="geometry" />
        </mxCell>
        <mxCell id="hYD4kwpyHkv21KdUr4Sz-5" parent="1" style="whiteSpace=wrap;html=1;" value="Fare Service" vertex="1">
          <mxGeometry height="60" width="120" x="1100" y="180" as="geometry" />
        </mxCell>
        <mxCell id="hYD4kwpyHkv21KdUr4Sz-12" edge="1" parent="1" source="hYD4kwpyHkv21KdUr4Sz-7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" target="hYD4kwpyHkv21KdUr4Sz-11" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hYD4kwpyHkv21KdUr4Sz-7" parent="1" style="whiteSpace=wrap;html=1;" value="Booking service" vertex="1">
          <mxGeometry height="60" width="120" x="1100" y="340" as="geometry" />
        </mxCell>
        <mxCell id="hYD4kwpyHkv21KdUr4Sz-20" edge="1" parent="1" source="hYD4kwpyHkv21KdUr4Sz-9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" target="hYD4kwpyHkv21KdUr4Sz-19" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hYD4kwpyHkv21KdUr4Sz-9" parent="1" style="whiteSpace=wrap;html=1;" value="Location Service" vertex="1">
          <mxGeometry height="60" width="120" x="1100" y="500" as="geometry" />
        </mxCell>
        <mxCell id="hYD4kwpyHkv21KdUr4Sz-16" edge="1" parent="1" source="hYD4kwpyHkv21KdUr4Sz-11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" target="hYD4kwpyHkv21KdUr4Sz-15" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hYD4kwpyHkv21KdUr4Sz-11" parent="1" style="whiteSpace=wrap;html=1;" value="Kafka" vertex="1">
          <mxGeometry height="60" width="330" x="1300" y="340" as="geometry" />
        </mxCell>
        <mxCell id="hYD4kwpyHkv21KdUr4Sz-13" parent="1" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;" value="Fare DB" vertex="1">
          <mxGeometry height="130" width="130" x="1400" y="145" as="geometry" />
        </mxCell>
        <mxCell id="hYD4kwpyHkv21KdUr4Sz-14" edge="1" parent="1" source="hYD4kwpyHkv21KdUr4Sz-5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" target="hYD4kwpyHkv21KdUr4Sz-13">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hYD4kwpyHkv21KdUr4Sz-18" edge="1" parent="1" source="hYD4kwpyHkv21KdUr4Sz-15" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" target="hYD4kwpyHkv21KdUr4Sz-17">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hYD4kwpyHkv21KdUr4Sz-30" edge="1" parent="1" source="hYD4kwpyHkv21KdUr4Sz-15" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" target="hYD4kwpyHkv21KdUr4Sz-29">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hYD4kwpyHkv21KdUr4Sz-15" parent="1" style="whiteSpace=wrap;html=1;" value="Booking Consumer" vertex="1">
          <mxGeometry height="60" width="120" x="1730" y="340" as="geometry" />
        </mxCell>
        <mxCell id="hYD4kwpyHkv21KdUr4Sz-17" parent="1" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;" value="Booking DB" vertex="1">
          <mxGeometry height="130" width="110" x="1990" y="305" as="geometry" />
        </mxCell>
        <mxCell id="hYD4kwpyHkv21KdUr4Sz-19" parent="1" style="ellipse;whiteSpace=wrap;html=1;" value="Redis" vertex="1">
          <mxGeometry height="150" width="150" x="1320" y="455" as="geometry" />
        </mxCell>
        <mxCell id="hYD4kwpyHkv21KdUr4Sz-22" edge="1" parent="1" source="hYD4kwpyHkv21KdUr4Sz-21" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" target="hYD4kwpyHkv21KdUr4Sz-3">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hYD4kwpyHkv21KdUr4Sz-21" parent="1" style="ellipse;whiteSpace=wrap;html=1;" value="Driver" vertex="1">
          <mxGeometry height="80" width="120" x="590" y="455" as="geometry" />
        </mxCell>
        <mxCell id="hYD4kwpyHkv21KdUr4Sz-24" edge="1" parent="1" source="hYD4kwpyHkv21KdUr4Sz-15" style="endArrow=classic;html=1;rounded=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" target="hYD4kwpyHkv21KdUr4Sz-19" value="">
          <mxGeometry height="50" relative="1" width="50" as="geometry">
            <mxPoint x="1600" y="360" as="sourcePoint" />
            <mxPoint x="1650" y="310" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="hYD4kwpyHkv21KdUr4Sz-25" parent="1" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;" value="Location DB" vertex="1">
          <mxGeometry height="110" width="109" x="1280" y="690" as="geometry" />
        </mxCell>
        <mxCell id="hYD4kwpyHkv21KdUr4Sz-26" parent="1" style="rounded=1;whiteSpace=wrap;html=1;" value="Kafka" vertex="1">
          <mxGeometry height="60" width="190" x="1140" y="620" as="geometry" />
        </mxCell>
        <mxCell id="hYD4kwpyHkv21KdUr4Sz-27" edge="1" parent="1" source="hYD4kwpyHkv21KdUr4Sz-9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.43;entryY=0.035;entryDx=0;entryDy=0;entryPerimeter=0;" target="hYD4kwpyHkv21KdUr4Sz-26">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hYD4kwpyHkv21KdUr4Sz-28" edge="1" parent="1" source="hYD4kwpyHkv21KdUr4Sz-26" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0;entryDx=0;entryDy=75;entryPerimeter=0;" target="hYD4kwpyHkv21KdUr4Sz-25">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hYD4kwpyHkv21KdUr4Sz-29" parent="1" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" value="Redis&amp;nbsp;" vertex="1">
          <mxGeometry height="120" width="120" x="1730" y="510" as="geometry" />
        </mxCell>
        <mxCell id="hYD4kwpyHkv21KdUr4Sz-31" parent="1" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;" value="&lt;font style=&quot;font-size: 24px;&quot;&gt;Deep Dives&lt;br&gt;1. Only send a single ride request to a driver at one time.&lt;br&gt;2. We can make an entry in redis with some ttl if user accespts the ride in that time fine else it will get deleted marking user as free&amp;nbsp;&lt;/font&gt;" vertex="1">
          <mxGeometry height="140" width="620" x="1220" y="820" as="geometry" />
        </mxCell>
        <mxCell id="hYD4kwpyHkv21KdUr4Sz-32" edge="1" parent="1" style="endArrow=classic;html=1;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" target="hYD4kwpyHkv21KdUr4Sz-33" value="">
          <mxGeometry height="50" relative="1" width="50" as="geometry">
            <mxPoint x="910" y="360" as="sourcePoint" />
            <mxPoint x="1090" y="50" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="hYD4kwpyHkv21KdUr4Sz-35" edge="1" parent="1" source="hYD4kwpyHkv21KdUr4Sz-33" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1300" y="69.99999999999989" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="hYD4kwpyHkv21KdUr4Sz-33" parent="1" style="rounded=0;whiteSpace=wrap;html=1;" value="User SVC" vertex="1">
          <mxGeometry height="60" width="120" x="1090" y="40" as="geometry" />
        </mxCell>
        <mxCell id="hYD4kwpyHkv21KdUr4Sz-39" edge="1" parent="1" source="hYD4kwpyHkv21KdUr4Sz-34" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" target="hYD4kwpyHkv21KdUr4Sz-38" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hYD4kwpyHkv21KdUr4Sz-34" parent="1" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;" value="User DB" vertex="1">
          <mxGeometry height="80" width="60" x="1304.5" y="20" as="geometry" />
        </mxCell>
        <mxCell id="hYD4kwpyHkv21KdUr4Sz-37" edge="1" parent="1" source="hYD4kwpyHkv21KdUr4Sz-15" style="endArrow=classic;html=1;rounded=0;entryX=0.979;entryY=0.641;entryDx=0;entryDy=0;entryPerimeter=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" target="hYD4kwpyHkv21KdUr4Sz-38" value="">
          <mxGeometry height="50" relative="1" width="50" as="geometry">
            <Array as="points">
              <mxPoint x="1640" y="150" />
            </Array>
            <mxPoint x="1780" y="330" as="sourcePoint" />
            <mxPoint x="1370" y="60" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="hYD4kwpyHkv21KdUr4Sz-38" parent="1" style="ellipse;whiteSpace=wrap;html=1;" value="Redis" vertex="1">
          <mxGeometry height="80" width="80" x="1434.5" y="20" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="Pz_AfPRuPY-DMIJScG8O" name="Ecommerce">
    <mxGraphModel dx="1602" dy="1120" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="RSlxvWxN_Oy4cO1uBD-2-1" parent="1" style="text;html=1;whiteSpace=wrap;overflow=hidden;rounded=0;" value="&lt;h1 style=&quot;margin-top: 0px;&quot;&gt;Ecommerce&lt;/h1&gt;&lt;p&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;&lt;b&gt;FR&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;1. search products&lt;/span&gt;&lt;/p&gt;&lt;p&gt;2. see product details&lt;/p&gt;&lt;p&gt;3. add products to cart&lt;/p&gt;&lt;p&gt;4. checkout and make payment&lt;/p&gt;&lt;p&gt;5. Check order status&amp;nbsp;&lt;br&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;NFR&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;1. C&lt;/b&gt;onsistency in orders placing&lt;/p&gt;&lt;p&gt;2. high availability outside order placing&lt;/p&gt;&lt;p&gt;3. Low latency for searches 200ms&amp;nbsp;&lt;/p&gt;&lt;p&gt;4. fault tolerance&amp;nbsp;&lt;/p&gt;" vertex="1">
          <mxGeometry height="370" width="410" x="90" y="260" as="geometry" />
        </mxCell>
        <mxCell id="RSlxvWxN_Oy4cO1uBD-2-4" edge="1" parent="1" source="RSlxvWxN_Oy4cO1uBD-2-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="690" y="440" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="RSlxvWxN_Oy4cO1uBD-2-2" parent="1" style="ellipse;whiteSpace=wrap;html=1;" value="" vertex="1">
          <mxGeometry height="80" width="120" x="440" y="400" as="geometry" />
        </mxCell>
        <mxCell id="RSlxvWxN_Oy4cO1uBD-2-6" edge="1" parent="1" source="RSlxvWxN_Oy4cO1uBD-2-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" target="RSlxvWxN_Oy4cO1uBD-2-5" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="RSlxvWxN_Oy4cO1uBD-2-14" edge="1" parent="1" source="RSlxvWxN_Oy4cO1uBD-2-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" target="RSlxvWxN_Oy4cO1uBD-2-9">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="RSlxvWxN_Oy4cO1uBD-2-16" edge="1" parent="1" source="RSlxvWxN_Oy4cO1uBD-2-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" target="RSlxvWxN_Oy4cO1uBD-2-15" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="RSlxvWxN_Oy4cO1uBD-2-24" edge="1" parent="1" source="RSlxvWxN_Oy4cO1uBD-2-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" target="RSlxvWxN_Oy4cO1uBD-2-23" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="RSlxvWxN_Oy4cO1uBD-2-28" edge="1" parent="1" source="RSlxvWxN_Oy4cO1uBD-2-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" target="RSlxvWxN_Oy4cO1uBD-2-27">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="RSlxvWxN_Oy4cO1uBD-2-33" edge="1" parent="1" source="RSlxvWxN_Oy4cO1uBD-2-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.75;entryDx=0;entryDy=0;" target="RSlxvWxN_Oy4cO1uBD-2-31">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="RSlxvWxN_Oy4cO1uBD-2-3" parent="1" style="rounded=0;whiteSpace=wrap;html=1;" value="APi gateway" vertex="1">
          <mxGeometry height="620" width="120" x="700" y="270" as="geometry" />
        </mxCell>
        <mxCell id="RSlxvWxN_Oy4cO1uBD-2-8" edge="1" parent="1" source="RSlxvWxN_Oy4cO1uBD-2-5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" target="RSlxvWxN_Oy4cO1uBD-2-7">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="RSlxvWxN_Oy4cO1uBD-2-5" parent="1" style="whiteSpace=wrap;html=1;rounded=0;" value="Users svc" vertex="1">
          <mxGeometry height="60" width="120" x="970" y="220" as="geometry" />
        </mxCell>
        <mxCell id="RSlxvWxN_Oy4cO1uBD-2-7" parent="1" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;" value="Users DB" vertex="1">
          <mxGeometry height="110" width="89" x="1200" y="195" as="geometry" />
        </mxCell>
        <mxCell id="RSlxvWxN_Oy4cO1uBD-2-13" edge="1" parent="1" source="RSlxvWxN_Oy4cO1uBD-2-9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1210" y="390" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="RSlxvWxN_Oy4cO1uBD-2-9" parent="1" style="rounded=0;whiteSpace=wrap;html=1;" value="Product SVC" vertex="1">
          <mxGeometry height="60" width="120" x="970" y="360" as="geometry" />
        </mxCell>
        <mxCell id="RSlxvWxN_Oy4cO1uBD-2-12" parent="1" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;" value="MongoDB" vertex="1">
          <mxGeometry height="100" width="89" x="1211" y="340" as="geometry" />
        </mxCell>
        <mxCell id="RSlxvWxN_Oy4cO1uBD-2-15" parent="1" style="whiteSpace=wrap;html=1;rounded=0;" value="Search svc" vertex="1">
          <mxGeometry height="60" width="120" x="970" y="520" as="geometry" />
        </mxCell>
        <mxCell id="RSlxvWxN_Oy4cO1uBD-2-17" parent="1" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;" value="Elasctic search" vertex="1">
          <mxGeometry height="80" width="60" x="1229" y="510" as="geometry" />
        </mxCell>
        <mxCell id="RSlxvWxN_Oy4cO1uBD-2-18" edge="1" parent="1" source="RSlxvWxN_Oy4cO1uBD-2-12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" target="RSlxvWxN_Oy4cO1uBD-2-17">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="RSlxvWxN_Oy4cO1uBD-2-19" edge="1" parent="1" source="RSlxvWxN_Oy4cO1uBD-2-15" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" target="RSlxvWxN_Oy4cO1uBD-2-17">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="RSlxvWxN_Oy4cO1uBD-2-20" parent="1" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;autosize=1;resizable=0;" value="CDC" vertex="1">
          <mxGeometry height="30" width="50" x="1315" y="470" as="geometry" />
        </mxCell>
        <mxCell id="RSlxvWxN_Oy4cO1uBD-2-21" parent="1" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" value="S3" vertex="1">
          <mxGeometry height="80" width="80" x="1490" y="350" as="geometry" />
        </mxCell>
        <mxCell id="RSlxvWxN_Oy4cO1uBD-2-23" parent="1" style="whiteSpace=wrap;html=1;rounded=0;" value="Cart svc" vertex="1">
          <mxGeometry height="60" width="120" x="970" y="680" as="geometry" />
        </mxCell>
        <mxCell id="RSlxvWxN_Oy4cO1uBD-2-25" parent="1" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;" value="Cart DB" vertex="1">
          <mxGeometry height="80" width="60" x="1240" y="670" as="geometry" />
        </mxCell>
        <mxCell id="RSlxvWxN_Oy4cO1uBD-2-26" edge="1" parent="1" source="RSlxvWxN_Oy4cO1uBD-2-23" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" target="RSlxvWxN_Oy4cO1uBD-2-25">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="RSlxvWxN_Oy4cO1uBD-2-51" edge="1" parent="1" source="RSlxvWxN_Oy4cO1uBD-2-27" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" target="RSlxvWxN_Oy4cO1uBD-2-49">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="RSlxvWxN_Oy4cO1uBD-2-27" parent="1" style="rounded=0;whiteSpace=wrap;html=1;" value="Order svc" vertex="1">
          <mxGeometry height="60" width="120" x="970" y="840" as="geometry" />
        </mxCell>
        <mxCell id="RSlxvWxN_Oy4cO1uBD-2-29" parent="1" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;" value="Order svc" vertex="1">
          <mxGeometry height="80" width="60" x="1250" y="830" as="geometry" />
        </mxCell>
        <mxCell id="RSlxvWxN_Oy4cO1uBD-2-30" edge="1" parent="1" source="RSlxvWxN_Oy4cO1uBD-2-27" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" target="RSlxvWxN_Oy4cO1uBD-2-29">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="RSlxvWxN_Oy4cO1uBD-2-35" edge="1" parent="1" source="RSlxvWxN_Oy4cO1uBD-2-31" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" target="RSlxvWxN_Oy4cO1uBD-2-34" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="RSlxvWxN_Oy4cO1uBD-2-37" edge="1" parent="1" source="RSlxvWxN_Oy4cO1uBD-2-31" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" target="RSlxvWxN_Oy4cO1uBD-2-36">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="RSlxvWxN_Oy4cO1uBD-2-31" parent="1" style="whiteSpace=wrap;html=1;rounded=0;" value="Payment Svc" vertex="1">
          <mxGeometry height="60" width="120" x="970" y="980" as="geometry" />
        </mxCell>
        <mxCell id="RSlxvWxN_Oy4cO1uBD-2-34" parent="1" style="whiteSpace=wrap;html=1;rounded=0;" value="Payment gateway" vertex="1">
          <mxGeometry height="60" width="120" x="970" y="1120" as="geometry" />
        </mxCell>
        <mxCell id="RSlxvWxN_Oy4cO1uBD-2-43" edge="1" parent="1" source="RSlxvWxN_Oy4cO1uBD-2-36" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" target="RSlxvWxN_Oy4cO1uBD-2-39">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="RSlxvWxN_Oy4cO1uBD-2-46" edge="1" parent="1" source="RSlxvWxN_Oy4cO1uBD-2-36" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" target="RSlxvWxN_Oy4cO1uBD-2-45">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="RSlxvWxN_Oy4cO1uBD-2-36" parent="1" style="rounded=0;whiteSpace=wrap;html=1;" value="Kafka" vertex="1">
          <mxGeometry height="60" width="360" x="1220" y="980" as="geometry" />
        </mxCell>
        <mxCell id="RSlxvWxN_Oy4cO1uBD-2-38" edge="1" parent="1" source="RSlxvWxN_Oy4cO1uBD-2-36" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0;entryDx=0;entryDy=52.5;entryPerimeter=0;" target="RSlxvWxN_Oy4cO1uBD-2-29">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="RSlxvWxN_Oy4cO1uBD-2-39" parent="1" style="rounded=0;whiteSpace=wrap;html=1;" value="Inventory svc" vertex="1">
          <mxGeometry height="60" width="120" x="1470" y="840" as="geometry" />
        </mxCell>
        <mxCell id="RSlxvWxN_Oy4cO1uBD-2-40" parent="1" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;" value="Inventory DB" vertex="1">
          <mxGeometry height="80" width="60" x="1560" y="700" as="geometry" />
        </mxCell>
        <mxCell id="RSlxvWxN_Oy4cO1uBD-2-41" parent="1" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" value="Redis" vertex="1">
          <mxGeometry height="80" width="80" x="1120" y="445" as="geometry" />
        </mxCell>
        <mxCell id="RSlxvWxN_Oy4cO1uBD-2-42" edge="1" parent="1" source="RSlxvWxN_Oy4cO1uBD-2-15" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=-0.005;entryY=0.733;entryDx=0;entryDy=0;entryPerimeter=0;" target="RSlxvWxN_Oy4cO1uBD-2-41">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="RSlxvWxN_Oy4cO1uBD-2-44" edge="1" parent="1" source="RSlxvWxN_Oy4cO1uBD-2-39" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" target="RSlxvWxN_Oy4cO1uBD-2-40">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="RSlxvWxN_Oy4cO1uBD-2-45" parent="1" style="rounded=0;whiteSpace=wrap;html=1;" value="Notification" vertex="1">
          <mxGeometry height="60" width="120" x="1109" y="1300" as="geometry" />
        </mxCell>
        <mxCell id="RSlxvWxN_Oy4cO1uBD-2-47" parent="1" style="ellipse;shape=cloud;whiteSpace=wrap;html=1;" value="CDN" vertex="1">
          <mxGeometry height="80" width="120" x="900" y="80" as="geometry" />
        </mxCell>
        <mxCell id="RSlxvWxN_Oy4cO1uBD-2-48" parent="1" style="rounded=0;whiteSpace=wrap;html=1;" value="Cron Job&amp;nbsp;" vertex="1">
          <mxGeometry height="60" width="120" x="1610" y="1150" as="geometry" />
        </mxCell>
        <mxCell id="RSlxvWxN_Oy4cO1uBD-2-49" parent="1" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" value="Redis&amp;nbsp;" vertex="1">
          <mxGeometry height="80" width="80" x="1140" y="750" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="tufRUdHGKJEJaigdTflq" name="Top K">
    <mxGraphModel dx="881" dy="616" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
